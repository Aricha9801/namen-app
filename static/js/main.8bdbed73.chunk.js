(this.webpackJsonpnamen_app=this.webpackJsonpnamen_app||[]).push([[0],{160:function(e,t,a){e.exports=a.p+"static/media/Logo-kadaster.5d975e1b.png"},177:function(e,t,a){e.exports=a(338)},208:function(e,t,a){},338:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),c=a.n(s),i=a(10),o=a(11),u=a(21),l=a(22),p=a(35),h=a(23),b=a(104),m=a.n(b),d=a(36),f=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"startScreen"},r.a.createElement("p",{className:"boldHeaderText"},"Wat is het?"),r.a.createElement("p",{className:"explainText"},"Dit is een applicatie die objecten uit de brt haalt. Denk hierbij aan buurten, straaten, meren en zelf bomen. Deze objecten hebben allemaal een naam. Aan de hand van deze naam kan je de objecten ophalen. Deze objecten hebben ook andere eigenschappen die je kunt bekijken."),r.a.createElement("p",{className:"boldHeaderText"},"Wie doe dit?"),r.a.createElement("p",{className:"explainText"},"brt"),r.a.createElement("p",{className:"boldHeaderText"},"Hoe werkt het?"),r.a.createElement("p",{className:"explainText"},"Deze applicatie kan op twee manieren aangestuurd worden. Je kan een naam zoeken in het zoekveld. Je kan ook dubbel klikken op de kaart om de nabije namen op te vragen."))}}]),t}(r.a.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.res.getResults().map((function(e){var t=r.a.createElement("p",{className:"hoofdText"},"\xa0"),a=r.a.createElement("p",{className:"subText"},"\xa0");return e.getNaam()&&(t=r.a.createElement("p",{className:"hoofdText"},e.getNaam())),e.getType()&&(a=r.a.createElement("p",{className:"subText"},e.getType()?e.getType():String.fromCharCode(32))),r.a.createElement("li",{key:e.getUrl()+e.getNaam(),className:"liResultScreen"},t,a)}));return r.a.createElement("div",{className:"homeScreen"},r.a.createElement("ul",null,e))}}]),t}(r.a.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homeScreen"},r.a.createElement("p",null,JSON.stringify(this.props.result)))}}]),t}(r.a.Component),g=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:f}),r.a.createElement(d.a,{path:"/result",render:function(t){return r.a.createElement(k,{res:e.props.res})}}),r.a.createElement(d.a,{exact:!0,path:"/result/:id",component:v}))}}]),t}(r.a.Component),E=a(51),y=a(347);function j(e){var t="nonLoadingButton";return e.loading&&(t="loadingButton"),r.a.createElement("div",{className:"backButton  "+t},r.a.createElement("p",null,"\xa0"))}function O(e){var t="nonLoadingButton";return e.loading&&(t="loadingButton"),r.a.createElement("div",{className:"backButton cursorPointer "+t,onClick:e.onBack},r.a.createElement("p",null,"\u2190 Terug"))}var w=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(j,{loading:e.props.loading})}}),r.a.createElement(d.a,{render:function(t){return r.a.createElement(O,{loading:e.props.loading,onBack:e.props.onBack})}}))}}]),t}(r.a.Component),N=a(159),S=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(N.BarLoader,{loading:this.props.loading,width:"100%",color:"#6495ED",height:4})}}]),t}(r.a.Component),x=(a(208),a(160)),T=a.n(x),_=a(32),C=a.n(_),R=a(59),B=function(){function e(t){Object(i.a)(this,e),this._url=t,this._naam=void 0,this._type=void 0,this._geoJson=void 0,this._subscribers=[]}return Object(o.a)(e,[{key:"getNaam",value:function(){return this._naam}},{key:"getUrl",value:function(){return this._url}},{key:"getType",value:function(){return this._type}},{key:"getGeoJson",value:function(){return this._geoJson}},{key:"setType",value:function(e){this._type=e,this.upDateSubScribers()}},{key:"setNaam",value:function(e){this._naam=e,this.upDateSubScribers()}},{key:"setGeoJson",value:function(e){this._geoJson=e,this.upDateSubScribers()}},{key:"upDateSubScribers",value:function(){this._subscribers.map((function(e){return e.update()}))}},{key:"subscribe",value:function(e){this._subscribers.push(e)}},{key:"unsubscribe",value:function(e){this._subscribers.filter((function(t){return t!==e}))}}]),e}(),F=a(161),D="";function J(){return(J=Object(R.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D=t,e.next=3,L('PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            \n            SELECT distinct ?obj WHERE {\n            { ?obj brt:naam ?label } UNION { ?obj brt:naamNL ?label } UNION {?obj brt:naamFries ?label}.\n              \n              FILTER(REGEX(?label, "'.concat(n=t,'", "i") || REGEX(?naamNl, "').concat(n,'", "i") || REGEX(?naamFries, "').concat(n,'", "i")).\n            }\n            LIMIT 20\n            '));case 3:if(a=e.sent,D===t){e.next=8;break}return e.abrupt("return",void 0);case 8:if(!(a.status>300)){e.next=10;break}return e.abrupt("return","error");case 10:return e.next=12,a.text();case 12:return a=e.sent,e.abrupt("return",I(JSON.parse(a)));case 14:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}function I(e){e=e.results.bindings;for(var t=[],a=function(a){var n,r=new B(e[a].obj.value);L((n=r.getUrl(),"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            PREFIX geo: <http://www.opengis.net/ont/geosparql#>\n\n            SELECT distinct * WHERE {\n               <".concat(n,"> a ?type\n             \n              Optional{<").concat(n,"> brt:naam ?naam.}.\n              Optional{<").concat(n,"> brt:naamNL ?naamNl.}.\n              Optional{<").concat(n,"> brt:naamFries ?naamFries}.\n              Optional{<").concat(n,"> geo:hasGeometry/geo:asWKT ?wktJson}.                \n            }"))).then(function(){var e=Object(R.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:if(t=e.sent,0===(t=(t=JSON.parse(t)).results.bindings).length){e.next=26;break}if(!(t=t[t.length-1]).naam){e.next=11;break}r.setNaam(t.naam.value),e.next=22;break;case 11:if(!t.naamNl){e.next=15;break}r.setNaam(t.naamNl.value),e.next=22;break;case 15:if(!t.naamFries){e.next=19;break}r.setNaam(t.naamFries.value),e.next=22;break;case 19:throw console.log(t),console.log(r),Error("No name");case 22:void 0!==t.type&&(a=(a=t.type.value).replace(/.*#/,""),r.setType(a)),void 0!==t.wktJson&&(n=t.wktJson,console.log(n),n=F.parse("POLYGON((4.6901353460717 51.640866278736,4.690392620844 51.640867810699,4.6903905537391 51.641002226186,4.6901332782035 51.641000694217,4.6901353460717 51.640866278736))"),console.log(n)),e.next=27;break;case 26:console.log("error: ",t,r);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.push(r)},n=0;n<e.length;n++)a(n);return t}function L(e){return P.apply(this,arguments)}function P(){return(P=Object(R.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.kadaster.triply.cc/datasets/kadaster/brt/services/brt/sparql",{method:"POST",headers:{"Content-Type":"application/sparql-query",Accept:"application/sparql-results+json"},body:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=a(49),X=function(){function e(){Object(i.a)(this,e),this._results=[],this._subscribers=[]}return Object(o.a)(e,[{key:"upDateSubScribers",value:function(){this._subscribers.map((function(e){return e.update()}))}},{key:"subscribe",value:function(e){this._subscribers.push(e)}},{key:"unsubscribe",value:function(e){this._subscribers.filter((function(t){return t!==e}))}},{key:"setResults",value:function(e){var t=this;this._results.forEach((function(e){e.unsubscribe(t)})),e.forEach((function(e){e.subscribe(t)})),this._results=e,this.upDateSubScribers()}},{key:"getResults",value:function(){return this._results}},{key:"clearResults",value:function(){var e=this;this._results.forEach((function(t){t.unsubscribe(e)})),this.upDateSubScribers()}},{key:"update",value:function(){this.upDateSubScribers()}}]),e}(),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).map=function(){var e=m.a.map("map",{minZoom:7,center:[52.20936,5.2],zoom:8,maxBounds:[[56,10],[49,0]]});m.a.tileLayer("https://geodata.nationaalgeoregister.nl/tiles/service/wmts/brtachtergrondkaart/EPSG:3857/{z}/{x}/{y}.png",{attribution:'Kaartgegevens &copy; <a href="https://www.kadaster.nl/">Kadaster</a> | <a href="https://www.verbeterdekaart.nl">Verbeter de kaart</a> '}).addTo(e)},a.onSearchChange=function(e,t){var n=t.value;n?(a.setState({searchQuery:n}),a.doSearch(n),"/"===a.props.location.pathname?a.props.history.push("/result"):"/result"!==a.props.location.pathname&&a.props.history.goBack()):(a.setState({searchQuery:""}),a.state.results.clearResults(),"/result"===a.props.location.pathname&&a.props.history.goBack())},a.doSearch=function(e){a.setState({isFetching:!0}),function(e){return J.apply(this,arguments)}(e.trim()).then((function(e){"error"===e?a.setState({isFetching:!1}):void 0!==e&&(a.setState({isFetching:!1}),a.state.results.setResults(e))}))},a.handleDeleteClick=function(){a.onSearchChange({},{value:""})},a.handleOnBackButtonClick=function(){a.props.history.goBack(),"/result"===a.props.location.pathname&&(a.setState({searchQuery:""}),a.state.results.clearResults())},a.update=function(){a.setState({results:a.state.results})},a.state={searchQuery:"",isFetching:!1,results:new X,clickedRes:{}},a.state.results.subscribe(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.map(),this.props.history.push("/")}},{key:"render",value:function(){var e,t=this;return e=this.state.searchQuery?r.a.createElement(E.a,{name:"delete",link:!0,onClick:this.handleDeleteClick}):r.a.createElement(E.a,{name:"search"}),r.a.createElement("section",{className:"App"},r.a.createElement("div",{className:"brtInfo"},r.a.createElement(z.b,{to:"/",onClick:function(){t.setState({searchQuery:""}),t.state.results.clearResults()}},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Basisregistratie Topografie"),r.a.createElement("img",{src:T.a,alt:"kadaster logo"}))),r.a.createElement("div",{className:"searchBar"},r.a.createElement(y.a,{input:{fluid:!0},value:this.state.searchQuery,noResultsMessage:"Geen resultaat",icon:e,onSearchChange:this.onSearchChange,open:!1})),r.a.createElement("div",{className:"resultsContainer"},r.a.createElement(w,{loading:this.state.isFetching,onBack:this.handleOnBackButtonClick}),r.a.createElement("div",{className:"loaderDiv"},r.a.createElement(S,{loading:this.state.isFetching})),r.a.createElement("div",{className:"resultPartContainer"},r.a.createElement(g,{res:this.state.results}))),r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"https://zakelijk.kadaster.nl/brt"},"Leer meer over de brt"))),r.a.createElement("div",{id:"map"}))}}]),t}(r.a.Component),Q=Object(d.f)(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[177,1,2]]]);
//# sourceMappingURL=main.8bdbed73.chunk.js.map