(this.webpackJsonpnamen_app=this.webpackJsonpnamen_app||[]).push([[0],{162:function(e,t,a){e.exports=a.p+"static/media/Logo-kadaster.5d975e1b.png"},178:function(e,t,a){e.exports=a(339)},210:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),i=a.n(s),o=a(9),c=a(10),u=a(21),l=a(22),p=a(35),h=a(23),m=a(44),d=a.n(m),b=a(105),f=a(36),k=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"startScreen"},r.a.createElement("p",{className:"boldHeaderText"},"Wat is het?"),r.a.createElement("p",{className:"explainText"},"Dit is een applicatie die objecten uit de brt haalt. Denk hierbij aan buurten, straaten, meren en zelf bomen. Deze objecten hebben allemaal een naam. Aan de hand van deze naam kan je de objecten ophalen. Deze objecten hebben ook andere eigenschappen die je kunt bekijken. (nog aanvullen)"),r.a.createElement("p",{className:"boldHeaderText"},"Wie doe dit?"),r.a.createElement("p",{className:"explainText"},"brt (nog aanvullen)"),r.a.createElement("p",{className:"boldHeaderText"},"Hoe werkt het?"),r.a.createElement("p",{className:"explainText"},"Deze applicatie kan op twee manieren aangestuurd worden. Je kan een naam zoeken in het zoekveld. Je kan ook dubbel klikken op de kaart om de nabije namen op te vragen."))}}]),t}(r.a.Component),g=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.res.getResults().map((function(t){var a=r.a.createElement("p",{className:"hoofdText"},"\xa0"),n=r.a.createElement("p",{className:"subText"},"\xa0");return t.getNaam()&&(a=r.a.createElement("p",{className:"hoofdText"},t.getNaam())),t.getType()&&(n=r.a.createElement("p",{className:"subText"},t.getType()?t.getType():String.fromCharCode(32))),r.a.createElement("li",{key:t.getUrl()+t.getNaam(),className:"liResultScreen",onClick:function(){e.props.onClickItem(t)}},a,n)}));return r.a.createElement("div",{className:"homeScreen"},r.a.createElement("ul",null,t))}}]),t}(r.a.Component),v=a(29),y=a.n(v),E=a(53),w=function(){function e(t){Object(o.a)(this,e),this._url=t,this._naam=void 0,this._type=void 0,this._geoJson=void 0,this._subscribers=[]}return Object(c.a)(e,[{key:"setSecondProperties",value:function(e,t,a){this._type=t,this._naam=e,this._geoJson=a,this.upDateSubScribers()}},{key:"getNaam",value:function(){return this._naam}},{key:"getUrl",value:function(){return this._url}},{key:"getType",value:function(){return this._type}},{key:"getGeoJson",value:function(){return this._geoJson}},{key:"upDateSubScribers",value:function(){this._subscribers.map((function(e){return e.update()}))}},{key:"subscribe",value:function(e){this._subscribers.push(e)}},{key:"unsubscribe",value:function(e){this._subscribers.filter((function(t){return t!==e}))}},{key:"getAsFeature",value:function(){return{type:"Feature",properties:this,geometry:this.getGeoJson()}}}]),e}(),N=a(158),j="";function _(){return(_=Object(E.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=t,e.next=3,T((s=x(t),'PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            \n            SELECT distinct * WHERE {\n              {?obj brt:naamNL "'.concat(s,'".} union {?obj brt:naam "').concat(s,'".} union {?obj brt:Fries "').concat(s,'".}\n            }\n')));case 3:return a=e.sent,e.next=6,T('PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            \n            SELECT distinct ?obj WHERE {\n            { ?obj brt:naam ?label } UNION { ?obj brt:naamNL ?label } UNION {?obj brt:naamFries ?label}.\n              \n              FILTER(REGEX(?label, "'.concat(r=t,'", "i") || REGEX(?naamNl, "').concat(r,'", "i") || REGEX(?naamFries, "').concat(r,'", "i")).\n            }\n            LIMIT 20\n            '));case 6:if(n=e.sent,j===t){e.next=11;break}return e.abrupt("return",void 0);case 11:if(!(n.status>300||a.status>300)){e.next=13;break}return e.abrupt("return","error");case 13:return e.next=15,a.text();case 15:return a=e.sent,e.next=18,n.text();case 18:return n=e.sent,a=S(JSON.parse(a)),n=S(JSON.parse(n)),e.abrupt("return",F(a,n));case 22:case"end":return e.stop()}var r,s}),e)})))).apply(this,arguments)}function O(){return(O=Object(E.a)(y.a.mark((function e(t){var a,n,r,s,i,o,c,u,l,p,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getUrl(),e.next=3,T("PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n            SELECT * WHERE {\n                <".concat(a,"> ?prd ?obj.\n            }"));case 3:return n=e.sent,e.next=6,n.text();case 6:for(n=e.sent,n=JSON.parse(n),r=n.results.bindings,c=[],u=[],l=0;l<r.length;l++)p=r[l].prd.value,h=r[l].obj.value,"http://brt.basisregistraties.overheid.nl/def/top10nl#naam"===p?s=h:"http://brt.basisregistraties.overheid.nl/def/top10nl#naamNL"===p?i=h:"http://brt.basisregistraties.overheid.nl/def/top10nl#naamFries"===p?o=h:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===p?c.push(C(R(h))):u.push({key:R(p),value:h});t.loadInAttributes(s,i,o,c,u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return(e=e.split(/(?=[A-Z])/)).forEach((function(e,t,a){0!==t&&(a[t]=a[t].charAt(0).toLowerCase()+a[t].slice(1))})),e.join(" ")}function R(e){return e.replace(/.*#/,"")}function S(e){e=e.results.bindings;for(var t=[],a=function(a){var n,r=new w(e[a].obj.value);T((n=r.getUrl(),"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX brt: <http://brt.basisregistraties.overheid.nl/def/top10nl#>\n            PREFIX geo: <http://www.opengis.net/ont/geosparql#>\n\n            SELECT distinct * WHERE {\n               <".concat(n,"> a ?type\n             \n              Optional{<").concat(n,"> brt:naam ?naam.}.\n              Optional{<").concat(n,"> brt:naamNL ?naamNl.}.\n              Optional{<").concat(n,"> brt:naamFries ?naamFries}.\n              Optional{<").concat(n,"> geo:hasGeometry/geo:asWKT ?wktJson}.                \n            }"))).then(function(){var e=Object(E.a)(y.a.mark((function e(t){var a,n,s,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:if(t=e.sent,0===(t=(t=JSON.parse(t)).results.bindings).length){e.next=27;break}if(!(t=t[t.length-1]).naam){e.next=11;break}a=t.naam.value,e.next=22;break;case 11:if(!t.naamNl){e.next=15;break}a=t.naamNl.value,e.next=22;break;case 15:if(!t.naamFries){e.next=19;break}a=t.naamFries.value,e.next=22;break;case 19:throw console.log(t),console.log(r),Error("No name");case 22:void 0!==t.type&&(i=t.type.value,n=C(n=i.replace(/.*#/,""))),void 0!==t.wktJson&&(o=t.wktJson.value,s=N.parse(o)),r.setSecondProperties(a,n,s),e.next=28;break;case 27:console.log("error: ",t,r);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.push(r)},n=0;n<e.length;n++)a(n);return t}function x(e){return e.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")}function F(e,t){return e.forEach((function(e){t=t.filter((function(t){return e.getUrl()!==t.getUrl()}))})),e.concat(t)}function T(e){return I.apply(this,arguments)}function I(){return(I=Object(E.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.kadaster.triply.cc/datasets/kadaster/brt/services/brt/sparql",{method:"POST",headers:{"Content-Type":"application/sparql-query",Accept:"application/sparql-results+json"},body:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).getNamenGegevens=function(e){e&&function(e){return O.apply(this,arguments)}(a.props.clickedResult).then((function(e){a.setState({res:a.props.clickedResult})}))},a.state={res:void 0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getNamenGegevens(this.props.clickedResult)}},{key:"render",value:function(){var e,t,a,n,s=this.state.res;if(s){var i,o;e=r.a.createElement("h1",null,s.getNaam()),t=r.a.createElement("h3",null,s.getTypeString()),s.getNaamFries()&&(o=r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Naam Fries:")),r.a.createElement("td",null,s.getNaamFries()))),(s.getNaamNl()||void 0===s.getNaamFries())&&(i=r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Naam Nederlands:")),r.a.createElement("td",null,s.getNaamNl()?s.getNaamNl():s.getNaam()))),a=r.a.createElement("div",null,r.a.createElement("table",{className:"namenTable"},r.a.createElement("tbody",null,i,o)),r.a.createElement("hr",null));var c=s.getAttributes().map((function(e){var t=e.value;return t.startsWith("http://")&&(t=r.a.createElement("a",{href:t},t)),r.a.createElement("tr",{key:e.key+e.value},r.a.createElement("td",null,e.key),r.a.createElement("td",null,t))}));n=r.a.createElement("table",{className:"attributeSectionObjectScreen"},r.a.createElement("tbody",null,c))}return r.a.createElement("div",{className:"objectScreen"},e,t,a,n)}}]),t}(r.a.Component),B=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:k}),r.a.createElement(f.a,{exact:!0,path:"/result",render:function(t){return r.a.createElement(g,{res:e.props.res,onClickItem:e.props.onClickItem})}}),r.a.createElement(f.a,{exact:!0,path:"/result/:id",render:function(t){return r.a.createElement(P,{clickedResult:e.props.clickedResult})}}))}}]),t}(r.a.Component),L=a(52),D=a(348);function J(e){var t="nonLoadingButton";return e.loading&&(t="loadingButton"),r.a.createElement("div",{className:"backButton  "+t},r.a.createElement("p",null,"\xa0"))}function G(e){var t="nonLoadingButton";return e.loading&&(t="loadingButton"),r.a.createElement("div",{className:"backButton cursorPointer "+t,onClick:e.onBack},r.a.createElement("p",null,"\u2190 Terug"))}var A=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(J,{loading:e.props.loading})}}),r.a.createElement(f.a,{render:function(t){return r.a.createElement(G,{loading:e.props.loading,onBack:e.props.onBack})}}))}}]),t}(r.a.Component),X=a(161),U=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(X.BarLoader,{loading:this.props.loading,width:"100%",color:"#6495ED",height:4})}}]),t}(r.a.Component),M=(a(210),a(162)),W=a.n(M),z=a(50),H=function(){function e(){Object(o.a)(this,e),this._results=[],this._clickedResult=void 0,this._subscribers=[]}return Object(c.a)(e,[{key:"upDateSubScribers",value:function(){this._subscribers.map((function(e){return e.update()}))}},{key:"subscribe",value:function(e){this._subscribers.push(e)}},{key:"unsubscribe",value:function(e){this._subscribers.filter((function(t){return t!==e}))}},{key:"setClickedResult",value:function(e){this._clickedResult=e,this._clickedResult.subscribe(this),this.upDateSubScribers()}},{key:"getClickedResult",value:function(){return this._clickedResult}},{key:"clearClickedResult",value:function(){this._clickedResult&&(this._clickedResult.unsubscribe(this),this._clickedResult=void 0,this.upDateSubScribers())}},{key:"clearAll",value:function(){var e=this;this._clickedResult&&(this._clickedResult.unsubscribe(this),this._clickedResult=void 0),this._results.forEach((function(t){t.unsubscribe(e)})),this._results=[],this.upDateSubScribers()}},{key:"setResults",value:function(e){var t=this;this._results.forEach((function(e){e.unsubscribe(t)})),e.forEach((function(e){e.subscribe(t)})),this._results=e,this.upDateSubScribers()}},{key:"getResults",value:function(){return this._results}},{key:"clearResults",value:function(){var e=this;this._results.forEach((function(t){t.unsubscribe(e)})),this._results=[],this.upDateSubScribers()}},{key:"update",value:function(){this.upDateSubScribers()}},{key:"getAllObjectsAsFeature",value:function(){var e=[];return this._results.forEach((function(t){t.getGeoJson()&&e.push(t.getAsFeature())})),e}}]),e}(),Q=function(){function e(t){Object(o.a)(this,e),this._res=t,this._naam=void 0,this._naamNL=void 0,this._naamFries=void 0,this._types=[],this._overige=[],this._subscribers=[]}return Object(c.a)(e,[{key:"getNaamFries",value:function(){return this._naamFries}},{key:"getNaamNl",value:function(){return this._naamNL}},{key:"loadInAttributes",value:function(e,t,a,n,r){this._naam=e,this._naamNL=t,this._naamFries=a,this._types=n,this._overige=r;var s=this._res.getUrl();this._overige.unshift({key:"brt link",value:s}),void 0===this._naam&&(void 0!==this._naamNL?this._naam=this._naamNL:this._naam=this._naamFries)}},{key:"upDateSubScribers",value:function(){this._subscribers.map((function(e){return e.update()}))}},{key:"subscribe",value:function(e){this._subscribers.push(e)}},{key:"unsubscribe",value:function(e){this._subscribers.filter((function(t){return t!==e}))}},{key:"getUrl",value:function(){return this._res.getUrl()}},{key:"getNaam",value:function(){return this._naam}},{key:"getAsFeature",value:function(){return this._res.getAsFeature()}},{key:"getTypeString",value:function(){return this._types.join(", ")}},{key:"getAttributes",value:function(){return this._overige}}]),e}(),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).mapInit=function(){a.map=d.a.map("map",{minZoom:7,center:[52.20936,5.2],zoom:8,maxBounds:[[56,10],[49,0]]}),d.a.tileLayer("https://geodata.nationaalgeoregister.nl/tiles/service/wmts/brtachtergrondkaart/EPSG:3857/{z}/{x}/{y}.png",{attribution:'Kaartgegevens &copy; <a href="https://www.kadaster.nl/">Kadaster</a> | <a href="https://www.verbeterdekaart.nl">Verbeter de kaart</a> '}).addTo(a.map),a.map.on("dblclick",a.handleDoubleClick),a.map.doubleClickZoom.disable(),a.geoJsonLayer=d.a.geoJSON([],{onEachFeature:a.addCenterMarker,pointToLayer:a.addMarker}).addTo(a.map),a.markerGroup=d.a.featureGroup().addTo(a.map)},a.addMarker=function(e,t){var n=d.a.marker(t).addTo(a.markerGroup);n.bindPopup('<div class = "marker">\n                    <b>'.concat(e.properties.getNaam(),'</b>\n                    <br/>\n                    <span class = "subTextMarker">').concat(e.properties.getType(),"</span><div>\n            "),{autoPan:!1,closeButton:!1}),n.on("mouseover",(function(e){this.openPopup()})),n.on("mouseout",(function(e){this.closePopup()})),n.on("click",(function(){a.onClickItem(e.properties)}))},a.addCenterMarker=function(e,t){if("Point"!==e.geometry.type){var n=b.centroid(e),r=n.geometry.coordinates[0],s=n.geometry.coordinates[1],i=d.a.marker([s,r]).addTo(a.markerGroup);i.bindPopup('<div class = "marker">\n                    <b>'.concat(e.properties.getNaam(),'</b>\n                    <br/>\n                    <span class = "subTextMarker">').concat(e.properties.getType(),"</span><div>\n            "),{autoPan:!1,closeButton:!1}),i.on("mouseover",(function(e){this.openPopup()})),i.on("mouseout",(function(e){this.closePopup()})),i.on("click",(function(){a.onClickItem(e.properties)})),t.bindPopup('<div class = "marker">\n                    <b>'.concat(e.properties.getNaam(),'</b>\n                    <br/>\n                    <span class = "subTextMarker">').concat(e.properties.getType(),"</span><div>\n            "),{autoPan:!1,closeButton:!1}),t.on("mouseover",(function(e){this.openPopup()})),t.on("mouseout",(function(e){this.closePopup()})),t.on("click",(function(){a.onClickItem(e.properties)}))}},a.onClickItem=function(e){var t=new Q(e);a.state.results.setClickedResult(t);var n=a.getCenterGeoJson(e.getGeoJson()),r=a.map.getZoom();r<10&&(r=10),a.map.setView(n,r),a.props.history.push("/result/".concat(e.getNaam()))},a.getCenterGeoJson=function(e){var t=b.centroid(e),a=t.geometry.coordinates[0];return[t.geometry.coordinates[1],a]},a.onSearchChange=function(e,t){var n=t.value;n?(a.setState({searchQuery:n}),a.state.results.clearClickedResult(),a.doSearch(n),"/"===a.props.location.pathname?a.props.history.push("/result"):"/result"!==a.props.location.pathname&&a.props.history.goBack()):(a.setState({searchQuery:""}),a.state.results.clearAll(),"/result"===a.props.location.pathname?a.props.history.goBack():"/"!==a.props.location.pathname&&a.props.history.go(-2)),a.map&&a.map.setView([52.20936,5.2],8)},a.doSearch=function(e){a.setState({isFetching:!0}),function(e){return _.apply(this,arguments)}(e.trim()).then((function(e){"error"===e?a.setState({isFetching:!1}):void 0!==e&&(a.setState({isFetching:!1}),a.state.results.setResults(e))}))},a.handleDeleteClick=function(){a.onSearchChange({},{value:""}),a.state.results.clearResults()},a.handleOnBackButtonClick=function(){a.props.history.goBack();var e=Object(f.e)(a.props.location.pathname,{path:"/result/:id",exact:!0,strict:!0});if("/result"===a.props.location.pathname)a.setState({searchQuery:""}),a.state.results.clearResults(),a.map.setView([52.20936,5.2],8);else if(e){a.state.results.clearClickedResult();var t=a.markerGroup.getBounds();t.getEast()-t.getWest()>2?a.map.fitBounds(a.markerGroup.getBounds()):a.map.fitBounds(a.markerGroup.getBounds().pad(.8))}},a.update=function(){var e=a.state.results;if(a.setState({results:e}),a.markerGroup.clearLayers(),a.geoJsonLayer.clearLayers(),a.state.results.getClickedResult()){var t=a.state.results.getClickedResult().getAsFeature();a.geoJsonLayer.addData(t)}else{a.state.results.getClickedResult()&&console.log("fout");var n=e.getAllObjectsAsFeature();a.geoJsonLayer.addData(n)}},a.state={searchQuery:"",isFetching:!1,results:new H},a.state.results.subscribe(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mapInit(),this.props.history.push("/")}},{key:"handleDoubleClick",value:function(e){e.latlng}},{key:"render",value:function(){var e,t=this;return e=this.state.searchQuery?r.a.createElement(L.a,{name:"delete",link:!0,onClick:this.handleDeleteClick}):r.a.createElement(L.a,{name:"search"}),r.a.createElement("section",{className:"App"},r.a.createElement("div",{className:"brtInfo"},r.a.createElement(z.b,{to:"/",onClick:function(){t.setState({searchQuery:""}),t.state.results.clearResults()}},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Basisregistratie Topografie"),r.a.createElement("img",{src:W.a,alt:"kadaster logo"}))),r.a.createElement("div",{className:"searchBar"},r.a.createElement(D.a,{input:{fluid:!0},value:this.state.searchQuery,noResultsMessage:"Geen resultaat",icon:e,onSearchChange:this.onSearchChange,open:!1})),r.a.createElement("div",{className:"resultsContainer"},r.a.createElement(A,{loading:this.state.isFetching,onBack:this.handleOnBackButtonClick}),r.a.createElement("div",{className:"loaderDiv"},r.a.createElement(U,{loading:this.state.isFetching})),r.a.createElement("div",{className:"resultPartContainer"},r.a.createElement(B,{res:this.state.results,clickedResult:this.state.results.getClickedResult(),onClickItem:this.onClickItem}))),r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"https://zakelijk.kadaster.nl/brt"},"Leer meer over de brt"))),r.a.createElement("div",{id:"map"}))}}]),t}(r.a.Component),V=Object(f.f)(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(z.a,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.87693eeb.chunk.js.map